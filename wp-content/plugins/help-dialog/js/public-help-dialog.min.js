jQuery(document).ready(function(e){function t(){let t=477-(720-window.innerHeight);e(".ephd-help-dialog-container").each(function(){let d="";e(this).find(".ephd-hd-header__logo").length&&(d=30),t>477?(e(this).find("#ephd-hd-body-container").css("height",477-d),e(this).find(".ephd-hd-header__logo").show()):(e(this).find("#ephd-hd-body-container").css("height",t),e(this).find(".ephd-hd-header__logo").hide())})}function d(t){switch(t){case"show_home":e(".ephd-hd-faq__faqs-container").css("display","flex"),e("#ephd-hd__search_results-cat-article-details").hide(),e("#ephd-hd-search-results__tab-container").hide(),e(".ephd-hd-kb__search-results-container").hide(),e(".ephd-hd-faq-container").css("display","flex"),c.removeClass("ephd-hd-search--active"),c.removeClass("ephd-hd-article-details-active"),c.removeClass("ephd-hd-search-error--active");break;case"show_search_results":e("#ephd-hd-search-results__tab-container").css("display","flex"),e(".ephd-hd-search-results__tab-content-container").show(),e(".ephd-hd-faq__faqs-container").hide(),e("#ephd-hd__search_results-cat-article-details").hide(),e(".ephd-hd-kb__search-results-container").show(),e(".ephd-hd-faq-container").show(),c.addClass("ephd-hd-search--active"),c.removeClass("ephd-hd-search-error--active"),c.removeClass("ephd-hd-article-details-active");break;case"hide_content":e("#ephd-hd-search-results__tab-container").hide(),e(".ephd-hd-search-results__tab-content-container").hide(),e(".ephd-hd__loading-spinner__container").css("display","flex"),c.removeClass("ephd-hd-search-error--active"),c.removeClass("ephd-hd-article-details-active");break;case"show_article_details":e("#ephd-hd-search-results__tab-container").hide(),e(".ephd-hd-search-results__tab-content-container").hide(),e(".ephd-hd__loading-spinner__container").css("display","flex"),e("#ephd-hd__search_results-cat-article-details").show(),e(".ephd-hd__loading-spinner__container").css("display","none"),c.addClass("ephd-hd-article-details-active"),c.removeClass("ephd-hd-search--active"),c.removeClass("ephd-hd-search-error--active");break;case"show_article_load_iframe_details":e("#ephd-hd-search-results__tab-container").hide(),e(".ephd-hd-search-results__tab-content-container").hide(),e(".ephd-hd__loading-spinner__container").css("display","flex");break;case"show_article_show_iframe_details":e("#ephd-hd__search_results-cat-article-details").show(),e(".ephd-hd__loading-spinner__container").css("display","none"),c.addClass("ephd-hd-article-details-active"),c.removeClass("ephd-hd-search--active"),c.removeClass("ephd-hd-search-error--active");break;case"show_error_message":e("#ephd-hd-search-results__tab-container").hide(),e(".ephd-hd-search-results__tab-content-container").hide(),c.addClass("ephd-hd-search-error--active"),c.removeClass("ephd-hd-article-details-active")}}function a(){if(0==e("#ephd-hd_article-desc_iframe"))return;let t=e("#ephd-hd_article-desc_iframe"),d=t.contents().find("html").outerHeight(!0),a=0;e(".ephd-hd-header__logo").length&&(a=50),d<300?t.height(300-a):t.height(d)}function h(t,a){let h=t,i=h.val(),o=h.data("ephd-widget-id"),l=h.closest("#ephd-help-dialog").data("ephd-page-id");clearTimeout(r),r=setTimeout(function(){if(i===h.val()){let t=n.includes(i)?0:1;n.push(i);let a={action:"ephd_search",search_terms:i,widget_id:o,page_id:l,lang:ephd_help_dialog_vars.lang,record_search:t},h="",r="",_="",p="";e.ajax({type:"POST",dataType:"json",url:ephd_help_dialog_vars.ajaxurl,data:a,beforeSend:function(t){e(".ephd-hd__loading-spinner__container").css("display","flex"),e(".ephd-hd-faq-container").hide()}}).done(function(t){t=t||"",e(".ephd-hd__loading-spinner__container").css("display","none"),t.error||"success"!==t.status?p=ephd_help_dialog_vars.msg_try_again:(t.no_results&&(p=t.no_results),t.faq_results&&(h=t.faq_results),t.article_results&&(r="<ul>"+t.article_results+"</ul>"),t.post_results&&(_="<ul>"+t.post_results+"</ul>"))}).fail(function(e,t,d){p=ephd_help_dialog_vars.msg_try_again+". ["+(d||ephd_help_dialog_vars.unknown_error)+"]"}).always(function(t){if(d("show_search_results"),c.addClass("ephd-hd-search--active"),e(".ephd-hd__contact-us__link").unbind("click").on("click",s),p.length>0)e("#ephd-hd__search_results__errors").html(p),d("show_error_message"),e("#ephd-help-dialog .ephd-hd-no-results__keywords").text(i);else{e("#ephd-hd__search-results-faqs-tab").hide(),e("#ephd-hd__search-results-articles-tab").hide(),e("#ephd-hd__search-results-post-tab").hide(),e("#ephd-hd__search_results__errors").html(" "),e(".ephd-hd-results__tab").removeClass("ephd-hd-results__tab--active"),e(".ephd-hd-results__tab-content ").removeClass("ephd-hd-results__tab-content--active"),e("#ephd-hd__search_results-cat-article-details").hide(),e("#ephd-hd-search-results__tab-container").removeClass("ephd-hd-search-results__tab-count--1 ephd-hd-search-results__tab-count--2 ephd-hd-search-results__tab-count--3 ephd-hd-search-results__tab-count--long-text");let t="",d=0,a=e("#ephd-hd__search-results-faqs-tab .ephd-hd-results__tab__text").text().length,s=e("#ephd-hd__search-results-articles-tab .ephd-hd-results__tab__text").text().length,i=e("#ephd-hd__search-results-post-tab .ephd-hd-results__tab__text").text().length;switch(h.length>0&&(e("#ephd-hd__search-results-faqs-tab").css("display","flex"),e("#ephd-hd__search_results__faqs").html(h),t="faq",d++),r.length>0&&(e("#ephd-hd__search-results-articles-tab").css("display","flex"),e("#ephd-hd__search_results__articles").html(r),t=""===t?"articles":t,d++),_.length>0&&(e("#ephd-hd__search-results-post-tab").css("display","flex"),e("#ephd-hd__search_results__posts").html(_),t=""===t?"posts":t,d++),(a>10||s>10||i>10)&&e("#ephd-hd-search-results__tab-container").addClass("ephd-hd-search-results__tab-count--long-text"),e("#ephd-hd-search-results__tab-container").addClass("ephd-hd-search-results__tab-count--"+d),t){case"faq":e("#ephd-hd__search-results-faqs-tab").addClass("ephd-hd-results__tab--active").trigger("click").focus(),e("#ephd-hd__search_results__faqs").addClass("ephd-hd-results__tab-content--active");break;case"articles":e("#ephd-hd__search-results-articles-tab").addClass("ephd-hd-results__tab--active").trigger("click").focus(),e("#ephd-hd__search_results__articles").addClass("ephd-hd-results__tab-content--active");break;case"posts":e("#ephd-hd__search-results-post-tab").addClass("ephd-hd-results__tab--active").trigger("click").focus(),e("#ephd-hd__search_results__posts").addClass("ephd-hd-results__tab-content--active")}}e(".ephd-hd__search-tooltip").removeClass("ephd-hd__search-tooltip--active")})}},a)}function s(){e(".ephd-hd-tab[data-ephd-target-tab="+e(this).attr("data-ephd-target-tab")+"]").trigger("click")}function i(t,d,a=0){let h=e("#ephd-help-dialog");if("on"!==h.data("ephd-count-analytics"))return;let s=t+"_"+d+"_"+a,i={action:"ephd_count_invocations_action",_wpnonce:ephd_help_dialog_vars.nonce,page_id:h.data("ephd-page-id"),widget_id:h.data("ephd-widget-id"),event_name:t,column_name:d,object_id:a};void 0===o[s]&&(o[s]=!0,e.ajax({type:"POST",dataType:"json",url:ephd_help_dialog_vars.ajaxurl,data:i}))}if(e(".ephd-hd-toggle").length){let e=jQuery(".ephd-hd-toggle").data("ephd-start-wait");setTimeout(function(){jQuery(".ephd-hd-toggle").show()},1e3*e)}let c=e("#ephd-help-dialog");if(e(".ephd-hd-toggle").length&&e("html.ephd-preview-iframe").length<=0){let t=e(".ephd-hd-toggle").data("analytics-delay");void 0===t&&(t=5),setTimeout(function(){i("impressions","view")},1e3*t)}e(".ephd-help-dialog-container").length&&(t(),e(window).on("resize",t)),e("body").on("click",".ephd-hd_article-item",function(t){t.preventDefault(),e(".ephd-hd_article-desc").css("height",""),e("#ephd-hd_article-desc_iframe").remove(),e("#ephd-hd_article-desc_excerpt").html("");let h=e(this).data("ephd-url");if(void 0===h||!h)return;let s=e(this).find(".ephd-hd_article-item__text").text();e(".ephd-hd_article-link").prop("href",h);let i=e(this).data("ephd-target"),c=ephd_help_dialog_vars.article_preview_not_available;switch(i){case"direct":return void window.open(h,"_blank").focus();case"iframe":return void function(t){let h=document.createElement("iframe");h.src=t,h.id="ephd-hd_article-desc_iframe",h.className="ephd-hd_article-desc",d("show_article_load_iframe_details"),e(".ephd-hd_article-item-details").get(0).appendChild(h),e("#ephd-hd_article-desc_iframe").on("load",function(){d("show_article_show_iframe_details");let t=e("#ephd-hd_article-desc_iframe").contents(),h=e("#ephd-user-defined-values-inline-css");h.length&&t.find("body").prepend(h.clone()),t.find("body").append("<style>.ephd-hd_article_preview-hidden { display: none!important;}</style>"),t.find("body").append(`<link rel='stylesheet' href='${ephd_help_dialog_vars.iframe_styles_url}' media='all' />`),t.find("html").addClass("ephd-preview-iframe"),t.find("body").addClass(ephd_help_dialog_vars.active_theme_class),t.find("body").addClass("ephd-hd_article-desc__body");let s=["eckb-article-back-navigation-container","eckb-article-content-breadcrumb-container","eckb-article-content-toolbar-container","eckb-article-content-created-date-container","eckb-article-content-last-updated-date-container","eckb-article-content-author-container","eckb-article-content-footer","eckb-article-toc"];t.find("body *").each(function(){let t=e(this);if(~s.indexOf(t.prop("id").toLowerCase())&&t.hide(),s.forEach(function(e){t.hasClass(e)&&t.hide()}),t.closest("#eckb-article-content").length||t.find("#eckb-article-content").length)return!0;let d=t.prop("tagName").toLowerCase();if("link"==d||"script"==d)return!0;t.hide(),t.addClass("ephd-hd_article_preview-hidden")}),t.find("#eckb-article-body").parents().each(function(){let t=e(this).get();t[0].style.setProperty("margin-top","0px","important"),t[0].style.setProperty("margin-bottom","0px","important"),t[0].style.setProperty("padding-top","0px","important"),t[0].style.setProperty("padding-bottom","0px","important")}),a(),setTimeout(a,700)})}(h);case"excerpt":default:return void function(t,a,h){let s=e("#ephd-hd__search-terms").data("ephd-widget-id"),i="",c="",r="",n={action:"ephd_get_post_content",post_id:h.data("ephd-post-id"),_wpnonce:ephd_help_dialog_vars.nonce,widget_id:s};e.ajax({type:"POST",dataType:"json",url:ephd_help_dialog_vars.ajaxurl,data:n,beforeSend:function(e){d("hide_content")}}).done(function(e){return d("show_article_details"),0===e.post_content.length||(a=e.post_content,i=e.excerpt_type,c=e.post_type,r=e.post_status,!0)}).always(function(){let d=" ephd-article-excerpt-type--"+i,h=" ephd-article-post-type--"+c.substring(0,4),s=" ephd-article-status-type--"+r;e("#ephd-hd_article-desc_excerpt").html('<div class="ephd-hd-article__excerpt-container '+d+" "+h+" "+s+' "> <div class="ephd-hd-excerpt__header"><h1 class="ephd-hd_article-title">'+t+'</h1></div> <div class="ephd-hd-excerpt__body">'+a+"</div> </div>")})}(s,c,e(this))}}),e(document.body).on("click",".ephd-hd__faq__back-btn",function(e){d("show_search_results")}),e("#ephd-hd_article-desc").contents().on("click","a",function(){let t=e(this).prop("href");return!(void 0===t||!t||"#"==t)&&(window.open(t,"_blank").focus(),!1)}),e(document.body).on("input","#ephd-hd__search-terms",function(t){let d=e(this).val(),a=d.split(" ");e(".ephd-hd__search-tooltip").removeClass("ephd-hd__search-tooltip--active");let s=0;a.forEach(function(t){if(t&&s++,s>3)return e(".ephd-hd__search-tooltip").addClass("ephd-hd__search-tooltip--active"),!1}),d.length>=3&&(h(e(this),500),e(".ephd-hd-faq__list__item-container").removeClass("ephd-hd-faq__list__item--active"))}),e(document.body).on("keydown","#ephd-hd__search-terms",function(t){let d=e(this).val();13==t.keyCode&&d.length>=3&&(h(e(this),0),e(".ephd-hd-faq__list__item-container").removeClass("ephd-hd-faq__list__item--active")),27==t.keyCode&&e(".ephd-hd__search-tooltip").removeClass("ephd-hd__search-tooltip--active")}),e(document.body).on("click",".ephd-hd__search-terms__icon",function(){let t=e(this).closest("#ephd-hd__search-form").find("#ephd-hd__search-terms");t.val().length>=3&&(h(t,0),e(".ephd-hd-faq__list__item-container").removeClass("ephd-hd-faq__list__item--active"))}),e(document.body).on("keyup","#ephd-hd__search-terms",function(t){(!e(this).val()||e(this).val().length<3)&&d("show_home"),e(this).val()||d("show_home")});let r,n=[];e(document.body).on("click",".ephd-hd__search-back-btn",function(){d("show_home")}),e(document.body).on("click",".ephd-hd__breadcrumb_text",function(){switch(e(this).attr("data-ephd-breadcrumb")){case"home":d("show_home");break;case"search_results":d("show_search_results");break;case"article":d("show_article_details")}}),e(document.body).on("click",".ephd-hd-results__tab",function(){e(".ephd-hd-results__tab").removeClass("ephd-hd-results__tab--active"),e(".ephd-hd-results__tab-content ").removeClass("ephd-hd-results__tab-content--active"),e(this).addClass("ephd-hd-results__tab--active");let t=e(this).attr("data-ephd-tab");e(".ephd-hd-results__tab-content[data-ephd-tab-content="+t+"]").addClass("ephd-hd-results__tab-content--active")}),e(document).on("click",".ephd-hd-toggle",function(){let t=e("#ephd-help-dialog"),d=e(this).find(".ephd-hd-toggle__icon");d.toggleClass(d.data("ephd-toggle-icons")),e(".ephd-hd-search-container").hide(),t.slideToggle(400,function(){e(".ephd-hd-search-container").show()}),e(this).toggleClass("ephd-hd-toggle--off ephd-hd-toggle--on"),e(this).attr("aria-pressed",function(e,t){return"true"===t?"false":"true"}),t.attr("tabindex",function(e,t){return"0"===t?"-1":"0"}),e(this).closest(".ephd-wp__widget-form").length||(t.addClass("ephd-hd-toggle--check"),e(this).hasClass("ephd-hd-toggle--on")&&(i("impressions","view"),i("launcher-open","click_1")),e(".ephd-hd-tab--active").length?e(".ephd-hd-tab--active").focus():e('#ephd-hd-body-container div[role="tabpanel"]:first').focus())}),e(document).on("keydown",".ephd-hd-toggle",function(t){switch(t.which){case 13:e(this).trigger("click")}}),e(document).on("keydown",".ephd-hd-tab",function(t){9===t.which&&(t.preventDefault(),"ephd-hd-faq-tab"===e(this).attr("id")&&e("#ephd-hd-body__content-container .ephd-hd-faq__list__item-container:first").focus(),"ephd-hd-contact-us-tab"===e(this).attr("id")&&e("#ephd-hd-body__contact-container .ephd-hd__contact-form-field:first input").focus())}),e(document).on("keydown","#ephd-hd__search-terms, .ephd-hd-results__tab",function(t){if(9===t.which){t.preventDefault();let d=e(".ephd-hd-results__tab-content--active");d.find(".ephd-hd_article-item:first").length?d.find(".ephd-hd_article-item:first").focus():d.find(".ephd-hd-faq__list__item-container:first").length?d.find(".ephd-hd-faq__list__item-container:first").focus():e("#ephd-hd-body__content-container .ephd-hd-faq__list__item-container:first").focus()}}),e(document).on("keydown",".ephd-hd-faq__list__item-container",function(t){13===t.which&&(t.preventDefault(),e(this).find(".ephd-hd__item__question").click())}),e(document).on("keydown",".ephd-hd_article-item",function(t){13===t.which&&(t.preventDefault(),e(this).click())}),e(document.body).on("click",".ephd-hd__item__question",function(t){let d=e(this).closest(".ephd-hd-faq__list__item-container");if(d.hasClass("ephd-hd__element--active"))return void d.removeClass("ephd-hd__element--active");d.parent().find(".ephd-hd-faq__list__item-container").removeClass("ephd-hd__element--active"),d.toggleClass("ephd-hd__element--active");document.querySelector(".ephd-hd-faq__list__item-container.ephd-hd__element--active").scrollIntoView({block:"start",behavior:"smooth"})}),e(document.body).on("click",".ephd-hd__contact-us__link",s),e(document.body).on("click",".ephd-hd-tab",function(){if(e(this).hasClass("ephd-hd-tab--disabled"))return;switch(e(this).attr("data-ephd-target-tab")){case"faqs":c.addClass("ephd-hd-faqs-tab--active"),c.removeClass("ephd-hd-contact-tab--active"),d("show_home");break;case"contact":c.addClass("ephd-hd-contact-tab--active"),c.removeClass("ephd-hd-faqs-tab--active"),c.removeClass("ephd-hd-search--active");let t=parseInt(e('#ephd-hd__contact-form input[name="contact_form_id"]').val());if(!t)return;i("contact-tab-opened","click_1",t)}c.find(".ephd-hd-tab").removeClass("ephd-hd-tab--active"),e(this).addClass("ephd-hd-tab--active"),c.find(".ephd-hd-tab").attr("tabindex","-1").attr("aria-selected",!1),e(this).attr("tabindex","0").attr("aria-selected",!0)}),e(document).on("keydown","#ephd-hd-top-tab-container",function(t){let d=e(".ephd-hd-tab"),a=e(this).find(".ephd-hd-tab--active"),h=null;switch(t.which){case 37:(h=a.prev(".ephd-hd-tab")).length||(h=d[d.length-1]);break;case 39:(h=a.next(".ephd-hd-tab")).length||(h=d[0])}h&&e(h).trigger("click").focus()}),e(document).on("keydown","#ephd-hd-search-results__tab-container",function(t){let d=e(".ephd-hd-results__tab:visible"),a=e(this).find(".ephd-hd-results__tab--active"),h=null;switch(t.which){case 37:(h=a.prev(".ephd-hd-results__tab:visible")).length||(h=d[d.length-1]);break;case 39:(h=a.next(".ephd-hd-results__tab:visible")).length||(h=d[0])}h&&e(h).trigger("click").focus()}),e(document).on("submit","#ephd-hd__contact-form",function(t){if(t.preventDefault(),!e("#ephd-help-dialog").is(":visible"))return;let d=e(this).serialize();d+="&jsnonce="+ephd_help_dialog_vars.nonce,e("#ephd-help-dialog").hasClass("ephd-hd-toggle--check")&&e.ajax({type:"POST",dataType:"json",url:ephd_help_dialog_vars.ajaxurl,data:d,beforeSend:function(t){e(".ephd-hd__contact-form-error").html(""),e(".ephd-hd__loading-spinner__container").css("display","flex")}}).done(function(t){e(".ephd-hd__loading-spinner__container").css("display","none"),void 0!==t.success&&!1!==t.success||void 0!==t.success&&!0===t.success?(e("#ephd-hd__contact-form-body").hide(),e(".ephd-hd__contact-form-response").html('<div class="ephd-hd__contact-form-response__message"><span>'+t.data+"</span></div>").css("display","flex")):void 0!==t.data&&t.data.length>5?e(".ephd-hd__contact-form-error").html('<div class="ephd-hd__contact-form-error__message">'+t.data+"</div>"):e(".ephd-hd__contact-form-error").html('<div class="ephd-hd__contact-form-error__message">'+ephd_help_dialog_vars.msg_try_again+"</div>")}).fail(function(t,d,a){e(".ephd-hd__contact-form-error").html('<div class="ephd-hd__contact-form-error__message">'+ephd_help_dialog_vars.msg_try_again+"</div>")}).always(function(){})});let o={}});